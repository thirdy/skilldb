<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
    <h:body>
    <ui:composition template="WEB-INF/templates/common/commonLayout.xhtml">
    	
		<ui:define name="content" >
		<h:form id="searchForm">
			<p:layoutUnit style="border:0;">		
			   
			   <p:focus for="filterQuery" />
			   <div style="margin-left:10px; margin-top:15px; margin-bottom:20px; ">
			   <p:outputPanel>
			            <b><h:outputText value="Search Profile: "/></b>
			            <p:inputText id="filterQuery" name="filterQuery" onfocus="this.value = this.value;" style="width:350px; margin-left:5px" value="#{homeController.searchQuery}" placeholder="Name or Skills"/>
			            <p:commandButton style="font-size:85%;width:35px"  icon="ui-icon-search" action="#{homeController.search()}"
			            update="searchForm, :messages"></p:commandButton>
			    </p:outputPanel>
			    </div>
			    	
			    <p:dataTable var="emp" value="#{homeController.employees}" style="margin-bottom:40px"  widgetVar="empSkillTable"
			    	emptyMessage="No employees found with given criteria">
					
						<p:column headerText="Name" sortBy="#{emp.firstName} #{emp.lastName}" width="300">
				            <h:outputText value="#{emp.firstName} #{emp.lastName}" />
				        </p:column>
				        	<p:column headerText="Role" sortBy="#{emp.role}" width="200">
				            <h:outputText value="#{emp.role}" />
				        </p:column>
				        
				        <p:column headerText="Skill Category" sortBy="#{emp.skillCategory}" width="200">
				            <h:outputText value="#{emp.skillCategory}" />
				        </p:column>
				        
				        <p:column headerText="Skill Name" sortBy="#{emp.skillName}" width="250">
				            <h:outputText value="#{emp.skillName}" />
				        </p:column>				        
				 
				        <p:column headerText="Years of Exp" sortBy="#{emp.yearsOfExperience}" width="150">
				            <h:outputText value="#{emp.yearsOfExperience}" />
				        </p:column>
				 
				        <p:column headerText="Level" sortBy="#{emp.level}" width="100">
				            <h:outputText value="#{emp.level}" />
				        </p:column>
				 
				        <p:column headerText="Certified" sortBy="#{emp.certified}" width="95">
				            <h:outputText value="#{emp.certified}" />
				        </p:column>  
				 	    <p:column headerText="APD Office" sortBy="#{emp.country}" width="150">
				            <h:outputText value="#{emp.country}" />
				        </p:column>
				        <p:column style="width:32px;text-align: center">
				            <p:commandButton style="font-size:10px;width:35px" oncomplete="PF('carDialog').show()" icon="ui-icon-search" title="View">
				                <f:setPropertyActionListener value="#{car}" target="#{dtSelectionView.selectedCar}" />
				            </p:commandButton>
				        </p:column>		       
			    </p:dataTable>
			  
			  <p:dialog header="Car Info" widgetVar="carDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
		        <p:outputPanel id="employeeDetail" style="text-align:center;">
		            <p:panelGrid  columns="2" rendered="#{not empty dtSelectionView.selectedCar}" columnClasses="label,value">
		                <f:facet name="header">
		                    <p:graphicImage name="demo/images/car/#{dtSelectionView.selectedCar.brand}-big.gif"/> 
		                </f:facet>
		 
		                <h:outputText value="Id:" />
		                <h:outputText value="#{dtSelectionView.selectedCar.id}" />
		 
		                <h:outputText value="Year" />
		                <h:outputText value="#{dtSelectionView.selectedCar.year}" />
		 
		                <h:outputText value="Color:" />
		                <h:outputText value="#{dtSelectionView.selectedCar.color}" style="color:#{dtSelectionView.selectedCar.color}"/>
		 
		                <h:outputText value="Price" />
		                <h:outputText value="$#{dtSelectionView.selectedCar.price}" />
		            </p:panelGrid>
		        </p:outputPanel>
		    </p:dialog>
			  
			
			</p:layoutUnit>
			</h:form>
		</ui:define>
		
	</ui:composition>
</h:body>
</html>



